# アルゴリズムとデータ構造B - Group 1

## アルゴリズムの概要
課題内容は、[課題内容](./doc/課題内容.pdf)を参照してください。
実装の仕組みや解説は、[成果発表会ポスター](./doc/1_p.pdf)を参考にしてください。

## ディレクトリ構成

```text
.
├── LICENSE                 // ライセンスファイル
├── Makefile                // 自動コンパイル・テスト用 Makefile
├── README.md               // プロジェクト説明書 (本ファイル)
├── doc                     // ドキュメント
│   └── ...
├── evaluation              // 評価・分析用ツール群
│   ├── evaluate.py         // 実行結果の正解率・速度評価
│   ├── export_csv.py       // 評価結果のCSV出力
│   ├── plot_graphs_jp.py   // 評価データのグラフ化
│   └── results             // 評価ログ保存先
├── src                     // ソースコード
│   ├── prep_1.c            // インデックス作成プログラム
│   └── search_1.c          // 探索プログラム (本体)
└── test                    // テスト用データ (gitignore対象)
    ├── db_1
    ├── query_1
    └── ...
```

## 実行方法

### 1. コンパイル

ソースコードをコンパイルします。`gcc` と `make` が必要です。

```bash
make
```

または個別にコンパイルする場合:
```bash
gcc -O2 -o prep_1 src/prep_1.c -lm
gcc -O2 -o search_1 src/search_1.c -lm
```

### 2. インデックス作成

データベースファイルから検索用のインデックス `index_1` を作成します。

```bash
./prep_1 <データベースファイル> > index_1
```

例:
```bash
./prep_1 test/db_1 > index_1
```
※ 出力は標準出力に出されるため、リダイレクト `>` でファイルに保存してください。

### 3. 検索実行

作成したインデックスを用いて、クエリファイルに対する検索を行います。

```bash
./search_1 <クエリファイル> index_1 > result_1
```

例:
```bash
./search_1 test/query_1 index_1 > result_1
```
※ `result_1` には、各クエリに対するマッチ有無（`1` または `0`）が出力されます。

## テスト

主要なデータセット (`db_1`, `query_1`) に対してビルドから実行までを一括で行うターゲットも用意しています。

```bash
make test
```